export function ShowWaiting(){const n=$("#waiting").data("ejWaitingPopup");n.show()}export function HideWaiting(){const n=$("#waiting").data("ejWaitingPopup");n.hide()}export function Testing(){alert("Testing")}export function ShowResults(){$("#TableTab").removeClass("d-none");$("#PartialTable").removeClass("d-none");$("#ChartTab").removeClass("d-none");$("#PartialChart").removeClass("d-none")}export function HideResults(){$("#TableTab").addClass("d-none");$("#PartialTable").addClass("d-none");$("#ChartTab").addClass("d-none");$("#PartialChart").addClass("d-none")}function n(n,t,i){HideWaiting();alert("Error in "+n+" Status: "+t+" Error: "+i)}function p(n){const t=$("#DataWizardTabs").data("ejTab");t.option("selectedItemIndex",n)}function w(){const n=$("#DataWizardTabs").data("ejTab");return n.model.selectedItemIndex}export function TabCreate(){}export function EnableButtons(){const t=$("#btnLoadQuery").data("ejButton"),i=$("#btnSaveQuery").data("ejButton"),r=$("#btnSearch").data("ejButton"),u=$("#btnDownload").data("ejButton");$.get("/DataWizard/GetState").done(function(n){n.LoadEnabled?t.enable():t.disable();n.SaveEnabled?i.enable():i.disable();n.SearchEnabled?r.enable():r.disable();n.DownloadEnabled?u.enable():u.disable()}).fail(function(t,i,r){n("GetState",i,r)})}export function DisableButtons(){const n=$("#btnLoadQuery").data("ejButton"),t=$("#btnSaveQuery").data("ejButton"),i=$("#btnSearch").data("ejButton"),r=$("#btnDownload").data("ejButton");n.disable();t.disable();i.disable();r.disable()}export function SetApproximation(){$.get("/DataWizard/SetApproximation").done(function(n){$("#PartialApproximation").html(n)}).fail(function(t,i,r){n("SetApproximation",i,r)})}export function FitMap(n=false){!n&&(b||t===null||t.isEmpty())||(r.setCenter(t.getCenter()),r.fitBounds(t),b=!0)}export function UpdateMap(){$.getJSON("/DataWizard/GetMapPoints").done(function(n){for(let n=0;n<u.length;n++)u[n].setMap(null);u=[];s=n;t=new google.maps.LatLngBounds;for(let n=0;n<s.length;n++){const i=s[n];(i.Latitude===null||i.Longitude===null)&&alert("Null");const f=new google.maps.Marker({position:{lat:i.Latitude,lng:i.Longitude},map:r,title:i.Title});u.push(f);t.extend(f.getPosition());i.IsSelected?(f.setIcon("/Images/green-dot.png"),f.setZIndex(1)):(f.setIcon("/Images/red-dot.png"),f.setZIndex(-1))}}).fail(function(t,i,r){n("UpdateMap",i,r)})}export function InitMap(){const n={center:new google.maps.LatLng(-34,25.5),zoom:5,mapTypeId:google.maps.MapTypeId.SATELLITE};r=new google.maps.Map(document.getElementById("mapLocations"),n);UpdateMap()}export function FixMap(){UpdateMap();FitMap(!0)}export function LocationsLoadComplete(){a||(a=!0,HideWaiting(),EnableButtons())}function h(t=false){if(!e){const i=$("#treeViewLocations").data("ejTreeView"),u=i.getCheckedNodes(),f=[];let r;for(r=0;r<u.length;r++){const n=i.getNode(u[r]);if(f.push(n.id),nt){let n=i.getParent(u[r]);while(n)i.expandNode(n),n=i.getParent(n)}}$.post("/DataWizard/UpdateLocationsSelected",{locations:f}).done(function(n){$("#PartialLocationsSelected").html(n);SetApproximation();UpdateMap();t&&HideResults();EnableButtons()}).fail(function(t,i,r){n("UpdateLocationsSelected",i,r)})}}export function LocationsChanged(){h(!0)}function k(){const n=$("#treeViewLocations").data("ejTreeView"),i=n.getCheckedNodes();let t;for(t=0;t<i.length;t++){let r=n.getParent(i[t]);while(r)n.expandNode(r),r=n.getParent(r)}}function c(t=false){if(!e){const i=$("#treeViewVariables").data("ejTreeView"),u=i.getCheckedNodes(),f=[];let r;for(r=0;r<u.length;r++){const n=i.getNode(u[r]);if(f.push(n.id),tt){let n=i.getParent(u[r]);while(n)i.expandNode(n),n=i.getParent(n)}}$.post("/DataWizard/UpdateVariablesSelected",{variables:f}).done(function(n){$("#PartialVariablesSelected").html(n);SetApproximation();t&&HideResults();EnableButtons()}).fail(function(t,i,r){n("UpdateVariablesSelected",i,r)})}}function d(){const n=$("#treeViewVariables").data("ejTreeView"),i=n.getCheckedNodes();let t;for(t=0;t<i.length;t++){let r=n.getParent(i[t]);while(r)n.expandNode(r),r=n.getParent(r)}}export function VariablesChanged(){c(!0)}function g(){v&&y&&(h(),c())}export function LocationsReady(){v=!0;g()}export function VariablesReady(){y=!0;g()}function it(t=false){const r=$("#StartDate").ejDatePicker("instance").getValue(),u=$("#EndDate").ejDatePicker("instance").getValue(),i=$("#ElevationSlider").ejSlider("instance").getValue(),f=i[0],e=i[1];$.post("/DataWizard/UpdateFilters",{startDate:r,endDate:u,elevationMinimum:f,elevationMaximum:e}).done(function(){SetApproximation();t&&HideResults();EnableButtons()}).fail(function(t,i,r){n("UpdateFilters",i,r)})}export function FiltersChanged(){it(!0)}export function DatasetOpen(){DisableButtons();$("#dialogDataset").ejDialog("open")}export function DatasetClose(){$("#dialogDataset").ejDialog("close");HideWaiting();EnableButtons()}export function Search(t,i=false){ShowWaiting();$.get("/DataWizard/GetData").done(function(){$("#PartialTable").load("/DataWizard/GetTableHtml",function(){$("#PartialChart").load("/DataWizard/GetChartHtml",function(){ShowResults();EnableButtons();HideWaiting();i===!1?p(5):(p(4),DatasetOpen())})})}).fail(function(t,i,r){n("GetData",i,r)})}export function LoadQueryOpen(){DisableButtons();$("#dialogLoadQuery").ejDialog("open");$("#editLoadQueryName").ejAutocomplete("open")}export function LoadQueryClose(){$("#editLoadQueryName").ejAutocomplete("hide");$("#dialogLoadQuery").ejDialog("close");HideWaiting();EnableButtons()}export function LoadQueryNameChange(){const t=$("#editLoadQueryName").val(),n=$("#btnLoadQueryLoad").data("ejButton");t===""?n.disable():n.enable()}export function LoadQuery(){ShowWaiting();$.ajax({url:"/DataWizard/LoadQuery",data:JSON.stringify({Name:$("#editLoadQueryName").val()}),async:!0,type:"POST",contentType:"application/json",success:function(){i=w();$("#PartialLocations").load("/DataWizard/GetLocationsHtml",function(){$("#PartialLocationsSelected").load("/DataWizard/GetLocationsSelectedHtml",function(){$("#PartialVariables").load("/DataWizard/GetVariablesHtml",function(){$("#PartialVariablesSelected").load("/DataWizard/GetVariablesSelectedHtml",function(){$("#PartialFilters").load("/DataWizard/GetFiltersHtml",function(){$("PartialTable").text("");$("PartialCards").text("");$("PartialChart").text("");HideResults();LoadQueryClose();f=!1;o=!1;e=!1;k();d();HideWaiting()})})})})})},error:function(t,i,r){n("LoadQueryLoad",i,r)}})}export function SaveQueryOpen(){DisableButtons();$("#dialogSaveQuery").ejDialog("open")}export function SaveQueryClose(){$("#dialogSaveQuery").ejDialog("close");HideWaiting();EnableButtons()}export function SaveQueryNameChange(){const t=$("#editSaveQueryName").val(),n=$("#btnSaveQuerySave").data("ejButton");t===""?n.disable():n.enable()}export function SaveQuery(){ShowWaiting();$.ajax({url:"/DataWizard/SaveQuery",data:JSON.stringify({Name:$("#editSaveQueryName").val(),Description:$("#editSaveQueryDescription").val()}),async:!0,type:"POST",contentType:"application/json"}).done(function(){SaveQueryClose()}).fail(function(t,i,r){n("SaveQuery",i,r)})}export function Test(){k();d()}export function DownloadOpen(){DisableButtons();$("#dialogDownload").ejDialog("open")}export function DownloadClose(){$("#dialogDownload").ejDialog("close");l||(HideWaiting(),EnableButtons())}export function Download(){l=!0;const t=$("#selectFormat").val();$("#dialogDownload").ejDialog("close");ShowWaiting();$.get("/Query/Data/GetDownload/"+t).done(function(n){l=!1;HideWaiting();window.open(n.downloadUrl,"_blank");window.location=n.viewDownloadUrl}).fail(function(t,i,r){n("GetDownload",i,r)})}export function TabActive(){i=w();i===0?f||(h(),f=!0):i===1?o||(c(),o=!0):i===3&&FitMap()}const nt=!0;let a=!1,v=!1,f=!1,e=!1,i=-1;const tt=!0;let y=!1,o=!1;class rt{constructor(){this.IsAuthenticated=!1;this.IsDataset=!1;this.LoadEnabled=!1;this.SaveEnabled=!1;this.SearchEnabled=!1;this.DownloadEnabled=!1}}let r,u=[],s,t,b=!1;let l=!1;